<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>src/debby/pools</title>
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css">

<script type="text/javascript" src="../dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">src/debby/pools</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="../theindex.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Pool"
    title="Pool = ptr PoolObj">Pool</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">add
      <li><a class="reference" href="#add%2CPool%2CDb"
    title="add(pool: Pool; t: Db)">add(pool: Pool; t: Db)</a></li>

  </ul>
  <ul class="simple nested-toc-section">borrow
      <li><a class="reference" href="#borrow%2CPool"
    title="borrow(pool: Pool): Db">borrow(pool: Pool): Db</a></li>

  </ul>
  <ul class="simple nested-toc-section">createTable
      <li><a class="reference" href="#createTable%2CPool%2Ctypedesc%5BT%5D"
    title="createTable[T: ref object](pool: Pool; t: typedesc[T])">createTable[T: ref object](pool: Pool; t: typedesc[T])</a></li>

  </ul>
  <ul class="simple nested-toc-section">delete
      <li><a class="reference" href="#delete%2CPool%2CT"
    title="delete[T: ref object](pool: Pool; obj: T)">delete[T: ref object](pool: Pool; obj: T)</a></li>

  </ul>
  <ul class="simple nested-toc-section">dropTable
      <li><a class="reference" href="#dropTable%2CPool%2Ctypedesc%5BT%5D"
    title="dropTable[T](pool: Pool; t: typedesc[T])">dropTable[T](pool: Pool; t: typedesc[T])</a></li>

  </ul>
  <ul class="simple nested-toc-section">dropTableIfExists
      <li><a class="reference" href="#dropTableIfExists%2CPool%2Ctypedesc%5BT%5D"
    title="dropTableIfExists[T](pool: Pool; t: typedesc[T])">dropTableIfExists[T](pool: Pool; t: typedesc[T])</a></li>

  </ul>
  <ul class="simple nested-toc-section">filter
      <li><a class="reference" href="#filter%2CPool%2Ctypedesc%5BT%5D"
    title="filter[T](pool: Pool; t: typedesc[T]): seq[T]">filter[T](pool: Pool; t: typedesc[T]): seq[T]</a></li>

  </ul>
  <ul class="simple nested-toc-section">get
      <li><a class="reference" href="#get%2CPool%2Ctypedesc%5BT%5D%2CV"
    title="get[T, V](pool: Pool; t: typedesc[T]; id: V): T">get[T, V](pool: Pool; t: typedesc[T]; id: V): T</a></li>

  </ul>
  <ul class="simple nested-toc-section">newPool
      <li><a class="reference" href="#newPool"
    title="newPool(): Pool">newPool(): Pool</a></li>

  </ul>
  <ul class="simple nested-toc-section">update
      <li><a class="reference" href="#update%2CPool%2CT"
    title="update[T: ref object](pool: Pool; obj: T)">update[T: ref object](pool: Pool; obj: T)</a></li>

  </ul>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#18" id="68">Templates</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">checkTable
      <li><a class="reference" href="#checkTable.t%2CPool%2Ctypedesc%5BT%5D"
    title="checkTable[T: ref object](pool: Pool; t: typedesc[T])">checkTable[T: ref object](pool: Pool; t: typedesc[T])</a></li>

  </ul>
  <ul class="simple nested-toc-section">close
      <li><a class="reference" href="#close.t%2CPool"
    title="close(pool: Pool)">close(pool: Pool)</a></li>

  </ul>
  <ul class="simple nested-toc-section">delete
      <li><a class="reference" href="#delete.t%2CPool%2Cseq%5BT%5D"
    title="delete[T: ref object](pool: Pool; objs: seq[T])">delete[T: ref object](pool: Pool; objs: seq[T])</a></li>

  </ul>
  <ul class="simple nested-toc-section">filter
      <li><a class="reference" href="#filter.t%2CPool%2Ctypedesc%5BT%5D%2Cuntyped"
    title="filter[T: ref object](pool: Pool; t: typedesc[T]; expression: untyped): untyped">filter[T: ref object](pool: Pool; t: typedesc[T]; expression: untyped): untyped</a></li>

  </ul>
  <ul class="simple nested-toc-section">insert
      <li><a class="reference" href="#insert.t%2CPool%2CT"
    title="insert[T: ref object](pool: Pool; obj: T)">insert[T: ref object](pool: Pool; obj: T)</a></li>
  <li><a class="reference" href="#insert.t%2CPool%2Cseq%5BT%5D"
    title="insert[T: ref object](pool: Pool; objs: seq[T])">insert[T: ref object](pool: Pool; objs: seq[T])</a></li>

  </ul>
  <ul class="simple nested-toc-section">update
      <li><a class="reference" href="#update.t%2CPool%2Cseq%5BT%5D"
    title="update[T: ref object](pool: Pool; objs: seq[T])">update[T: ref object](pool: Pool; objs: seq[T])</a></li>

  </ul>
  <ul class="simple nested-toc-section">upsert
      <li><a class="reference" href="#upsert.t%2CPool%2CT"
    title="upsert[T: ref object](pool: Pool; obj: T)">upsert[T: ref object](pool: Pool; obj: T)</a></li>
  <li><a class="reference" href="#upsert.t%2CPool%2Cseq%5BT%5D"
    title="upsert[T: ref object](pool: Pool; objs: seq[T])">upsert[T: ref object](pool: Pool; objs: seq[T])</a></li>

  </ul>
  <ul class="simple nested-toc-section">withDb
      <li><a class="reference" href="#withDb.t%2CPool%2Cuntyped"
    title="withDb(pool: Pool; body: untyped)">withDb(pool: Pool; body: untyped)</a></li>

  </ul>

  </ul>
</li>

</ul>

  </div>
  &nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L1"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L1" class="link-seesrc" target="_blank" >Edit</a>

  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"></p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="common.html">common</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<div id="Pool">
<dt><pre><a href="pools.html#Pool"><span class="Identifier">Pool</span></a> <span class="Other">=</span> <span class="Keyword">ptr</span> <span class="Identifier">PoolObj</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L11"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L11" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<div id="add,Pool,Db">
<dt><pre><span class="Keyword">proc</span> <a href="#add%2CPool%2CDb"><span class="Identifier">add</span></a><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">t</span><span class="Other">:</span> <a href="common.html#Db"><span class="Identifier">Db</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">gcsafe</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Add new or returns an entry to the pool.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L39"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L39" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="borrow,Pool">
<dt><pre><span class="Keyword">proc</span> <a href="#borrow%2CPool"><span class="Identifier">borrow</span></a><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">)</span><span class="Other">:</span> <a href="common.html#Db"><span class="Identifier">Db</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">gcsafe</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Note: you should use withDb instead. Takes an entry from the pool. This call blocks until it can take an entry. After taking an entry remember to add it back to the pool when you're finished with it.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L27"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L27" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="createTable,Pool,typedesc[T]">
<dt><pre><span class="Keyword">proc</span> <a href="#createTable%2CPool%2Ctypedesc%5BT%5D"><span class="Identifier">createTable</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Creates a table, errors out if it already exists.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L79"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L79" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="delete,Pool,T">
<dt><pre><span class="Keyword">proc</span> <a href="#delete%2CPool%2CT"><span class="Identifier">delete</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">obj</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span></pre></dt>
<dd>

Deletes the row that corresponds to the object from the data base. Makes sure the obj.id is set.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L106"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L106" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="dropTable,Pool,typedesc[T]">
<dt><pre><span class="Keyword">proc</span> <a href="#dropTable%2CPool%2Ctypedesc%5BT%5D"><span class="Identifier">dropTable</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Removes tables, errors out if it does not exist.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L69"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L69" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="dropTableIfExists,Pool,typedesc[T]">
<dt><pre><span class="Keyword">proc</span> <a href="#dropTableIfExists%2CPool%2Ctypedesc%5BT%5D"><span class="Identifier">dropTableIfExists</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Removes tables if it exists.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L74"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L74" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="filter,Pool,typedesc[T]">
<dt><pre><span class="Keyword">proc</span> <a href="#filter%2CPool%2Ctypedesc%5BT%5D"><span class="Identifier">filter</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span></pre></dt>
<dd>

Filter without a filter clause just returns everything.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L150"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L150" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="get,Pool,typedesc[T],V">
<dt><pre><span class="Keyword">proc</span> <a href="#get%2CPool%2Ctypedesc%5BT%5D%2CV"><span class="Identifier">get</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">id</span><span class="Other">:</span> <span class="Identifier">V</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span></pre></dt>
<dd>

Gets the object by id.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L90"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L90" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="newPool">
<dt><pre><span class="Keyword">proc</span> <a href="#newPool"><span class="Identifier">newPool</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Creates a new thread-safe pool. Pool starts empty, don't forget to .add() DB connections.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L19"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L19" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="update,Pool,T">
<dt><pre><span class="Keyword">proc</span> <a href="#update%2CPool%2CT"><span class="Identifier">update</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">obj</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span></pre></dt>
<dd>

Updates the row that corresponds to the object in the database. Makes sure the obj.id is set.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L95"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L95" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="18">
<h1><a class="toc-backref" href="#18">Templates</a></h1>
<dl class="item">
<div id="checkTable.t,Pool,typedesc[T]">
<dt><pre><span class="Keyword">template</span> <a href="#checkTable.t%2CPool%2Ctypedesc%5BT%5D"><span class="Identifier">checkTable</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Checks to see if table matches the object. And recommends to create whole table or alter it.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L84"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L84" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="close.t,Pool">
<dt><pre><span class="Keyword">template</span> <a href="#close.t%2CPool"><span class="Identifier">close</span></a><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">)</span></pre></dt>
<dd>

Closes all entires and Deallocates the pool.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L47"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L47" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="delete.t,Pool,seq[T]">
<dt><pre><span class="Keyword">template</span> <a href="#delete.t%2CPool%2Cseq%5BT%5D"><span class="Identifier">delete</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">objs</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Deletes a seq of objects from the database.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L112"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L112" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="filter.t,Pool,typedesc[T],untyped">
<dt><pre><span class="Keyword">template</span> <a href="#filter.t%2CPool%2Ctypedesc%5BT%5D%2Cuntyped"><span class="Identifier">filter</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">expression</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Filters type's table with a Nim like filter expression. db.filter(Auto, it.year &gt; 1990) db.filter(Auto, it.make == &quot;Ferrari&quot; or it.make == &quot;Lamborghini&quot;) db.filter(Auto, it.year &gt;= startYear and it.year &lt; endYear)
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L140"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L140" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="insert.t,Pool,T">
<dt><pre><span class="Keyword">template</span> <a href="#insert.t%2CPool%2CT"><span class="Identifier">insert</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">obj</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span></pre></dt>
<dd>

Inserts the object into the database. Reads the ID of the inserted ref object back.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L117"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L117" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="insert.t,Pool,seq[T]">
<dt><pre><span class="Keyword">template</span> <a href="#insert.t%2CPool%2Cseq%5BT%5D"><span class="Identifier">insert</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">objs</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Inserts a seq of objects into the database.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L123"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L123" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="update.t,Pool,seq[T]">
<dt><pre><span class="Keyword">template</span> <a href="#update.t%2CPool%2Cseq%5BT%5D"><span class="Identifier">update</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">objs</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Updates a seq of objects into the database.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L101"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L101" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="upsert.t,Pool,T">
<dt><pre><span class="Keyword">template</span> <a href="#upsert.t%2CPool%2CT"><span class="Identifier">upsert</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">obj</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span></pre></dt>
<dd>

Either updates or inserts a ref object into the database. Will read the inserted id back.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L128"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L128" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="upsert.t,Pool,seq[T]">
<dt><pre><span class="Keyword">template</span> <a href="#upsert.t%2CPool%2Cseq%5BT%5D"><span class="Identifier">upsert</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Keyword">object</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">objs</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Either updates or inserts a seq of object into the database. Will read the inserted id back for each object.
&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L134"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L134" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="withDb.t,Pool,untyped">
<dt><pre><span class="Keyword">template</span> <a href="#withDb.t%2CPool%2Cuntyped"><span class="Identifier">withDb</span></a><span class="Other">(</span><span class="Identifier">pool</span><span class="Other">:</span> <a href="pools.html#Pool"><span class="Identifier">Pool</span></a><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/treeform/debby/tree/master/src/debby/pools.nim#L60"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/treeform/debby/edit/devel/src/debby/pools.nim#L60" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2023-07-26 01:29:43 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
